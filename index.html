<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>√áoklu Dil Kod Kontrolc√º</title>
    <style>
        body { font-family: Arial; max-width: 900px; margin: 0 auto; padding: 20px; }
        .container { display: flex; gap: 20px; }
        .editor-section, .result-section { flex: 1; }
        textarea { width: 100%; height: 250px; margin: 10px 0; font-family: monospace; }
        select, button { padding: 10px; margin: 5px 0; width: 100%; }
        button { background: #007acc; color: white; border: none; cursor: pointer; }
        .error { color: red; margin: 5px 0; padding: 8px; background: #ffe6e6; }
        .warning { color: orange; margin: 5px 0; padding: 8px; background: #fff4e6; }
        .success { color: green; margin: 5px 0; padding: 8px; background: #e6ffe6; }
        .info { color: blue; margin: 5px 0; padding: 8px; background: #e6f7ff; }
    </style>
</head>
<body>
    <h1>üîç √áoklu Dil Kod Kontrolc√º</h1>
    
    <select id="languageSelect" onchange="changeLanguage()">
        <option value="javascript">JavaScript</option>
        <option value="html">HTML</option>
        <option value="css">CSS</option>
    </select>
    
    <div class="container">
        <div class="editor-section">
            <textarea id="codeInput" placeholder="Kodunuzu buraya yapƒ±≈ütƒ±rƒ±n..."></textarea>
            <button onclick="checkCode()">Kodu Kontrol Et</button>
        </div>
        
        <div class="result-section">
            <h3>Sonu√ßlar:</h3>
            <div id="result"></div>
        </div>
    </div>

    <script>
        let currentLanguage = 'javascript';
        
        function changeLanguage() {
            currentLanguage = document.getElementById('languageSelect').value;
            const placeholder = {
                javascript: 'JavaScript kodunuzu buraya yapƒ±≈ütƒ±rƒ±n...',
                html: 'HTML kodunuzu buraya yapƒ±≈ütƒ±rƒ±n...',
                css: 'CSS kodunuzu buraya yapƒ±≈ütƒ±rƒ±n...'
            }[currentLanguage];
            
            document.getElementById('codeInput').placeholder = placeholder;
            document.getElementById('result').innerHTML = '';
        }

        function checkCode() {
            const code = document.getElementById('codeInput').value;
            const resultDiv = document.getElementById('result');
            
            let errors = [];
            let warnings = [];
            let infos = [];

            if (currentLanguage === 'javascript') {
                checkJavaScript(code, errors, warnings, infos);
            } else if (currentLanguage === 'html') {
                checkHTML(code, errors, warnings, infos);
            } else if (currentLanguage === 'css') {
                checkCSS(code, errors, warnings, infos);
            }

            // Sonu√ßlarƒ± g√∂ster
            displayResults(resultDiv, errors, warnings, infos);
        }

        function checkJavaScript(code, errors, warnings, infos) {
            // Parantez kontrol√º
            const openParen = (code.match(/\(/g) || []).length;
            const closeParen = (code.match(/\)/g) || []).length;
            if (openParen !== closeParen) {
                errors.push('Parantez hatasƒ±: A√ßƒ±k ve kapalƒ± parantez sayƒ±larƒ± e≈üit deƒüil');
            }

            // S√ºsl√º parantez kontrol√º
            const openBrace = (code.match(/\{/g) || []).length;
            const closeBrace = (code.match(/\}/g) || []).length;
            if (openBrace !== closeBrace) {
                errors.push('S√ºsl√º parantez hatasƒ±: A√ßƒ±k ve kapalƒ± s√ºsl√º parantez sayƒ±larƒ± e≈üit deƒüil');
            }

            // K√∂≈üeli parantez kontrol√º
            const openBracket = (code.match(/\[/g) || []).length;
            const closeBracket = (code.match(/\]/g) || []).length;
            if (openBracket !== closeBracket) {
                errors.push('K√∂≈üeli parantez hatasƒ±: A√ßƒ±k ve kapalƒ± k√∂≈üeli parantez sayƒ±larƒ± e≈üit deƒüil');
            }

            // Noktalƒ± virg√ºl kontrol√º
            const lines = code.split('\n');
            lines.forEach((line, index) => {
                const trimmedLine = line.trim();
                if (trimmedLine && !trimmedLine.endsWith(';') && 
                    !trimmedLine.endsWith('{') && !trimmedLine.endsWith('}') &&
                    !trimmedLine.includes('if') && !trimmedLine.includes('function') &&
                    !trimmedLine.includes('for') && !trimmedLine.includes('while') &&
                    !trimmedLine.startsWith('//') && !trimmedLine.startsWith('/*')) {
                    warnings.push(`Satƒ±r ${index + 1}: Noktalƒ± virg√ºl eksik olabilir - "${trimmedLine}"`);
                }
            });

            // console.log kontrol√º
            if (code.includes('console.log') && !code.includes('console.log(')) {
                errors.push('console.log parantezleri eksik');
            }
        }

        function checkHTML(code, errors, warnings, infos) {
            // √áok daha basit ve g√ºvenilir bir yakla≈üƒ±m
            const selfClosingTags = ['!doctype', 'area', 'base', 'br', 'col', 'embed', 'hr', 'img', 'input', 'link', 'meta', 'param', 'source', 'track', 'wbr'];
            
            // Tag'leri bul (sadece normal tag'ler)
            const tags = code.match(/<(\/?)([a-z][a-z0-9]*)(?:\s[^>]*)?>/gi) || [];
            const stack = [];
            
            let openCount = 0;
            let closeCount = 0;

            tags.forEach(tag => {
                const tagMatch = tag.match(/<(\/?)([a-z][a-z0-9]*)/i);
                if (!tagMatch) return;
                
                const isClosing = tagMatch[1] === '/';
                const tagName = tagMatch[2].toLowerCase();
                
                // Self-closing tagleri ve DOCTYPE'i tamamen yoksay
                if (selfClosingTags.includes(tagName)) {
                    return;
                }
                
                if (isClosing) {
                    closeCount++;
                    // Stack kontrol√º
                    if (stack.length === 0) {
                        errors.push(`Fazladan kapalƒ± tag: </${tagName}>`);
                    } else if (stack[stack.length - 1] !== tagName) {
                        errors.push(`Tag sƒ±ralamasƒ± hatasƒ±: </${tagName}> beklenirken </${stack[stack.length - 1]}> bulundu`);
                    } else {
                        stack.pop();
                    }
                } else {
                    openCount++;
                    stack.push(tagName);
                }
            });

            // Sadece ger√ßek hata durumlarƒ±nda uyarƒ± ver
            if (openCount !== closeCount) {
                if (stack.length > 0) {
                    errors.push(`A√ßƒ±k kalan tagler var: ${stack.join(', ')}`);
                } else {
                    warnings.push(`K√º√ß√ºk tag dengesizliƒüi: ${openCount} a√ßƒ±k, ${closeCount} kapalƒ±`);
                }
            }

            // img tag kontrol√º
            const imgTags = code.match(/<img[^>]*>/gi) || [];
            imgTags.forEach((imgTag, index) => {
                if (!imgTag.includes('alt=')) {
                    warnings.push(`img tag'inde alt attribute eksik`);
                }
            });

            // link tag kontrol√º
            const linkTags = code.match(/<link[^>]*>/gi) || [];
            linkTags.forEach((linkTag, index) => {
                if (!linkTag.includes('rel=')) {
                    warnings.push(`link tag'inde rel attribute eksik`);
                }
            });

            // DOCTYPE kontrol√º (sadece tam HTML sayfalarƒ± i√ßin)
            const hasHtmlTag = code.includes('<html');
            const hasDoctype = code.trim().toLowerCase().replace(/<!--.*?-->/gs, '').trim().startsWith('<!doctype html>');
            if (hasHtmlTag && !hasDoctype) {
                infos.push('DOCTYPE declaration eksik olabilir');
            }
        }

        function checkCSS(code, errors, warnings, infos) {
            // S√ºsl√º parantez kontrol√º
            const openBrace = (code.match(/\{/g) || []).length;
            const closeBrace = (code.match(/\}/g) || []).length;
            if (openBrace !== closeBrace) {
                errors.push('CSS s√ºsl√º parantez hatasƒ±: A√ßƒ±k ve kapalƒ± s√ºsl√º parantez sayƒ±larƒ± e≈üit deƒüil');
            }

            // Noktalƒ± virg√ºl kontrol√º
            const lines = code.split('\n');
            lines.forEach((line, index) => {
                const trimmedLine = line.trim();
                if (trimmedLine && !trimmedLine.endsWith(';') && 
                    !trimmedLine.endsWith('{') && !trimmedLine.endsWith('}') &&
                    !trimmedLine.startsWith('/*') && !trimmedLine.endsWith('*/') &&
                    !trimmedLine.includes('@import') && !trimmedLine.includes('@media') &&
                    !trimmedLine.startsWith('//')) {
                    warnings.push(`Satƒ±r ${index + 1}: Noktalƒ± virg√ºl eksik olabilir - "${trimmedLine}"`);
                }
            });

            // Kapanmamƒ±≈ü yorum kontrol√º
            const commentStart = (code.match(/\/\*/g) || []).length;
            const commentEnd = (code.match(/\*\//g) || []).length;
            if (commentStart !== commentEnd) {
                errors.push('Kapanmamƒ±≈ü CSS yorumu var');
            }

            // Ge√ßersiz selector kontrol√º (basit)
            if (code.includes('@import') && !code.includes('url(')) {
                warnings.push('@import ifadesinde url() eksik olabilir');
            }
        }

        function displayResults(resultDiv, errors, warnings, infos) {
            let html = '';
            
            if (errors.length === 0 && warnings.length === 0) {
                html += '<div class="success">‚úÖ Tebrikler! Temel hata bulunamadƒ±</div>';
            }
            
            if (errors.length > 0) {
                html += '<h4>üî¥ Hatalar:</h4>';
                html += errors.map(error => `<div class="error">${error}</div>`).join('');
            }
            
            if (warnings.length > 0) {
                html += '<h4>üü° Uyarƒ±lar:</h4>';
                html += warnings.map(warning => `<div class="warning">${warning}</div>`).join('');
            }
            
            if (infos.length > 0) {
                html += '<h4>üîµ Bilgiler:</h4>';
                html += infos.map(info => `<div class="info">${info}</div>`).join('');
            }
            
            resultDiv.innerHTML = html;
        }

        // Sayfa y√ºklendiƒüinde √∂rnek kod g√∂ster
        window.onload = function() {
            const exampleCode = `<!DOCTYPE html>
<html>
<head>
    <title>√ñrnek Sayfa</title>
</head>
<body>
    <div>
        <h1>Merhaba D√ºnya</h1>
        <p>Bu bir √∂rnek paragraf</p>
        <img src="resim.jpg" alt="A√ßƒ±klama">
    </div>
</body>
</html>`;
            document.getElementById('codeInput').value = exampleCode;
        };
    </script>
</body>
</html>
